"use strict";var dataList=JSON.parse(localStorage.getItem("cart")),shopFather=document.querySelector(".shoppCart_con>div"),buyPanel=document.querySelector(".shop_buy"),selectShop=document.querySelector(".shop_select_list");function setShopView(){var a="";dataList.forEach(function(t,e){a+='<ul  class="shop_cont">\n                <li>\n                    <input class="checkBuy" index='.concat(e,' type="checkbox" ').concat(t.buy?"checked":"",' >\n                    <div>\n                        <img src="').concat(t.goods_small_logo,'" alt="">\n                    </div>\n                    <p>').concat(t.goods_name,"</p>\n                    <span>").concat(t.goods_price,'元</span>\n                    <div>\n                        <input type="submit" index=').concat(e,' class="clearBuy" value="-">\n                        <input class="shop_num" type="text" placeholder="').concat(t.num,'">\n                        <input type="submit" index=').concat(e,' class="addBuy" value="+">\n                    </div>\n                    <span>').concat((t.goods_price*t.num).toFixed(2),'元</span>\n                    <span class="closeGoods" index=').concat(e," >X</span>\n                </li>\n            </ul>")}),shopFather.innerHTML=a}setShopView(),setFootShop(),selectShop.addEventListener("click",function(t){"yesCH"==(t=t||window.event).target.className?($(".checkBuy").prop("checked",!0),dataList.forEach(function(t,e){dataList[e].buy=!0}),$(".shop_select_list div:nth-of-type(2)>input").prop("checked",!1),$(".shop_select_list div:nth-of-type(3)>input").prop("checked",!1)):"noCH"==t.target.className?(dataList.forEach(function(t,e){dataList[e].buy=!1}),$(".checkBuy").prop("checked",!1),$(".shop_select_list div:nth-of-type(1)>input").prop("checked",!1),$(".shop_select_list div:nth-of-type(3)>input").prop("checked",!1)):"nyCH"==t.target.className&&$(".checkBuy").each(function(t,e){dataList[t].buy=!$(e).prop("checked"),$(e).prop("checked",!$(e).prop("checked")),$(".shop_select_list div:nth-of-type(2)>input").prop("checked",!1),$(".shop_select_list div:nth-of-type(1)>input").prop("checked",!1)}),localStorage.setItem("cart",JSON.stringify(dataList)),setFootShop()});var shopPanel=document.querySelectorAll(".shop_cont");function setFootShop(){var c=0,n=0,s=0;$(".shop_select_list div>input").click(function(){console.log("11")}),$(".checkBuy").each(function(t,e){if($(e).prop("checked")){var a=dataList[t];c+=a.num,n+=parseFloat((a.goods_price*a.num).toFixed(2))}s+=dataList[t].num}),str="\n           \n            <p>继续购买 共<span>".concat(s,"</span> 件商品，已选<span>").concat(c,"</span> 件</p>\n            <p>共计：<span>").concat(n,'</span>元</p>\n            <button class="').concat(c<=0?"buyList":"",'">去结算</button>\n            <div   class="').concat(0<c?"buyListShow":"",'">\n                请勾选需要结算的商品\n                <span></span>\n            </div>'),buyPanel.innerHTML=str}$(shopFather).click(function(t){if("INPUT"==(t=t||window.event).target.tagName&&(t.preventDefault?t.preventDefault():t.returnValue=!0),"addBuy"==t.target.className){var e=t.target.getAttribute("index");dataList[e].num<dataList[e].goods_number?dataList[e].num+=1:(window.confirm("库存不足，客观只有这些啦！！"),dataList[e].num=dataList[e].goods_number)}else if("clearBuy"==t.target.className){var a=t.target.getAttribute("index");if(console.log(dataList[a].num),1<dataList[a].num)dataList[a].num-=1;else window.confirm("您确定要移出此商品吗？")&&dataList.splice(a,1)}else if("closeGoods"==t.target.className){var c=t.target.getAttribute("index");dataList.splice(c,1)}else if("checkBuy"==t.target.className){var n=t.target.getAttribute("index");dataList[n].buy=!dataList[n].buy}localStorage.setItem("cart",JSON.stringify(dataList)),setShopView(),setFootShop()});